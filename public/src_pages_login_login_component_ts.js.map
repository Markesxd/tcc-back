{"version":3,"file":"src_pages_login_login_component_ts.js","mappings":"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","sources":["./src/pages/login/login.component.ts","./src/pages/login/login.component.html"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { Component } from '@angular/core';\nimport { FormBuilder, ReactiveFormsModule, ValidationErrors, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { catchError, map } from 'rxjs';\nimport { User } from 'src/model/User.model';\nimport { AuthService } from 'src/services/auth.service';\n\n@Component({\n  selector: 'login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n  imports: [CommonModule, ReactiveFormsModule],\n  standalone: true\n})\nexport class LoginComponent {\n\n  loginFailed = false;\n  serviceFailed = false;\n\n  editForm = this.fb.group({\n    email: ['', [Validators.required, Validators.email]],\n    password: ['', [Validators.required]]\n  })\n\n  constructor (\n    protected fb: FormBuilder,\n    private authService: AuthService,\n    private router: Router\n  ) {}\n\n  get emailErrors(): ValidationErrors | null | undefined {\n    const email = this.editForm.get('email'); \n    return email?.touched ? email.errors : null;\n  }\n\n  get isPasswordValid(): boolean {\n    const password = this.editForm.get('password');\n    if(!password) {\n      return false;\n    }\n    return !password.dirty || password.errors === null;\n  }\n\n  onSubmit() {\n    const user = new User();\n    user.createFromForm(this.editForm);\n    user.username = user.email;\n    this.authService.login(user)\n      .pipe(catchError((err) => {\n        if(err.status === 401) {\n          this.loginFailed = true;\n        } else {\n          this.serviceFailed = true;\n        }\n        throw err;\n      }))\n      .subscribe(() => {\n        this.router.navigate(['food']); \n      });\n  }\n}\n","<div class=\"login-wrapper\">\n    <form class=\"login-body\" [formGroup]=\"editForm\" (ngSubmit)=\"onSubmit()\">\n        <img class=\"login-logo\" src=\"../../../assets/icon-512x512.png\" alt=\"logo\">\n        <div class=\"login-fail\" *ngIf=\"loginFailed\">Email e/ou Senha Inválidos!</div>\n        <div class=\"login-fail\" *ngIf=\"serviceFailed\">Erro no Servidor</div>\n        <div>\n            <label for=\"email\">Email</label>\n            <span *ngIf=\"emailErrors && emailErrors['required']\" class=\"login-error\">Preencha o Email</span>\n            <span *ngIf=\"emailErrors && emailErrors['email']\" class=\"login-error\">Email Inválido</span>\n        </div>\n        <input type=\"email\" id=\"Email\" name=\"email\" formControlName=\"email\">\n        <div>\n            <label for=\"password\">Senha</label>\n            <span *ngIf=\"!isPasswordValid\" class=\"login-error\">Preecha a Senha</span>\n        </div>\n        <input type=\"password\" id=\"password\" name=\"password\" formControlName=\"password\">\n        <button class=\"login-button\" type=\"submit\" [disabled]=\"!editForm.valid\" >Entrar</button>\n        <a href=\"/register\" class=\"login-anchor\">Cadastro</a>\n    </form>\n</div>"],"names":["CommonModule","ReactiveFormsModule","Validators","catchError","User","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","LoginComponent","constructor","fb","authService","router","loginFailed","serviceFailed","editForm","group","email","required","password","emailErrors","get","touched","errors","isPasswordValid","dirty","onSubmit","user","createFromForm","username","login","pipe","err","status","subscribe","navigate","_","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","Router","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_1_listener","ɵɵelement","ɵɵtemplate","LoginComponent_div_3_Template","LoginComponent_div_4_Template","LoginComponent_span_8_Template","LoginComponent_span_9_Template","LoginComponent_span_14_Template","ɵɵadvance","ɵɵproperty","valid","i4","NgIf","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}